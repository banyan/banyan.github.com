<html>
  <head>
    <meta charset="utf-8" />
    <title>Dokku の LT してきた - @banyan's blog</title>
    <meta name="author" content="Kohei Hasegawa" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="/stylesheets/main.css" />
    <link
      rel="stylesheet"
      href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.1/build/styles/github-gist.min.css"
    />
    <link rel="shortcut icon" href="/images/favicon.ico" />
    <link rel="apple-touch-icon" href="/images/apple-touch-icon.png" />
    <link
      rel="apple-touch-icon"
      sizes="72x72"
      href="/images/apple-touch-icon-72x72.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="114x114"
      href="/images/apple-touch-icon-114x114.png"
    />
    <link
      href="/atom.xml"
      rel="alternate"
      title="@banyan's blog"
      type="application/atom+xml"
    />

    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(["_setAccount", "UA-1469541-7"]);
      _gaq.push(["_trackPageview"]);

      (function () {
        var ga = document.createElement("script");
        ga.type = "text/javascript";
        ga.async = true;
        ga.src =
          ("https:" == document.location.protocol
            ? "https://ssl"
            : "http://www") + ".google-analytics.com/ga.js";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </head>

  <body>
    <main class="content-width">
      <div class="content-padded autopagerize_page_element">
        <div>
          <h1 class="entry-title"><a href="/2014/01/16/1">Dokku の LT してきた</a></h1>
        </div>

        <div>
          <time>Jan 16th, 2014</time>
        </div>

        <div id="main-content">
          <div class="content">
            <p><a href="http://herokujp.doorkeeper.jp/events/8004">Heroku Meetup #11 New Year Party!!</a> で <a href="https://github.com/progrium/dokku">Dokku</a> の話を LT してきた。</p>
<p><a href="http://banyan.me/slides/20140116/slides.html">Inside Dokku in 5 minutes</a></p>
<p>5分過ぎると5分過ぎてますよーとかドラが鳴るとかはなく、ケーブルを抜いて終わるという strict な感じな LT だった。</p>
<p>5分なので Dokku スライドに書かなかった内容としては、</p>
<ul>
<li>Ubuntu 13.04 で動かす必要がある (Ubuntu 13.10 だと Docker 側にバグがあって docker 0.8.* 系で修正される予定らしい、<a href="https://github.com/dotcloud/docker/issues/1300">これ</a>と<a href="https://github.com/dotcloud/docker/issues/1906">これ</a>)</li>
<li>クリーンインストールを前提としている</li>
<li>サーバのホストネームが名前解決されない時は <code>/home/dokku/VHOST</code> に手動でホスト名を書く必要がある</li>
<li>Docker のバージョンがあがって Docker 側に regression がある時は  <code>DOCKER_VERSION=0.7.5 make install</code> とかして Docker のバージョン固定する (<a href="https://github.com/progrium/dokku/pull/407">PR</a>)</li>
<li><code>/home/dokku/dokkurc</code> に <code>export DOKKU_TRACE=1</code> と書くとログが出るのでデバッグとか流れを追うのに便利</li>
<li><code>dokku run [application name] rake db:migrate</code> とかで migrate は手動で行う必要がある</li>
<li>MySQL plugin とかは前は動いてと思うけど、docker, dokku 共に変更が加えられて動かなくなってる。<a href="https://github.com/banyan/dokku-mysql-plugin">https://github.com/banyan/dokku-mysql-plugin</a> の fork はとりあえず動いてる。PostgreSQL は plugin たくさんある。</li>
<li>これは dokku の問題ではなく docker の問題だけど、status が Ghost の Docker が出てしまうことがあった。<a href="https://github.com/dotcloud/docker/issues/2419">https://github.com/dotcloud/docker/issues/2419</a> docker 側でもよくわかってないらしい。確かに kill とか stop はできなかったけど、docker restart したら自分の場合は普通に直った。</li>
<li>root domain の設定は <a href="https://github.com/progrium/dokku/wiki/Deploying-to-root-and-subdomains">https://github.com/progrium/dokku/wiki/Deploying-to-root-and-subdomains</a> に書いてある</li>
</ul>
<p>Dokku の仕組み面白いと思いました。SSH の本とかもやはり読みたいなーと思った。
あとはプレゼンをもう少しなんとかしたい。同僚の @kyanny はリビングプレゼンテーション Zen という感じなのでもう少し何とか吸収したいなぁ &gt;&lt;</p>

          </div>
        </div>

        <div>
          <div class="pagination">
            
            <a href="/2013/12/24/1" rel="next">« earlier</a>
             
            <a href="/2014/07/22/1">later »</a>
            
          </div>
        </div>

        <div class="autopagerize_insert_before"></div>
      </div>
    </main>
  </body>
</html>
